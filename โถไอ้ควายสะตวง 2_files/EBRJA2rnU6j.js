if (self.CavalryLogger) { CavalryLogger.start_js(["KEULu"]); }

__d('NotificationJewelListBucketHeader.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){return c('React').createElement('div',{className:"_fyy"},j.title.toUpperCase());}f.exports=i;}),null);
__d('NotificationBucketGeneric.react',['cx','NotificationJewelListBucketHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.title,n=l.ids,o=l.listRenderer,p=l.startIndex;if(n.length===0)return null;var q=o(n,p);return c('React').createElement('div',{className:"_32hm"},m?c('React').createElement(c('NotificationJewelListBucketHeader.react'),{title:m}):null,c('React').createElement('ul',null,q));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('NotificationBucket.react',['cx','BootloadedComponent.react','NotificationBucketGeneric.react','NotificationBucketUtils','NotificationJewelListBucketHeader.react','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.$NotificationBucket1=function(){var l=this.props.bucket,m=l.bucketType,n=l.title;return c('React').createElement('div',null,c('React').createElement(c('NotificationJewelListBucketHeader.react'),{title:n,bucketType:m}),c('React').createElement(c('XUISpinner.react'),{className:"_1e00"}));};k.prototype.render=function(){var l=this.props,m=l.bucket,n=l.listRenderer,o=l.startIndex,p=m.bucketType;if(!c('NotificationBucketUtils').isBucketTypeSupported(p))return null;if(c('NotificationBucketUtils').isGenericBucketType(p))return c('React').createElement(c('NotificationBucketGeneric.react'),babelHelpers['extends']({},m,{listRenderer:n,startIndex:o}));var q=c('NotificationBucketUtils').getModuleForType(p);if(!q)return null;return c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:q,bootloadPlaceholder:this.$NotificationBucket1()},m));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('NotificationsTabsModel',['fbt','EnterpriseLabsLoggingEvents','EnterpriseLabsTypedLogger'],(function a(b,c,d,e,f,g,h){var i={TABS:{all:h._("All"),myConversations:h._("My Conversations"),keywords:h._("Keywords")},onTabSelectionChanged:function j(){var k=this.props.children[this.getSelectedIndex()].key;new (c('EnterpriseLabsTypedLogger'))().setEntityID('tab:'+k).setEvent(c('EnterpriseLabsLoggingEvents').NT_CLICK_TAB).log();}};f.exports=i;}),null);
__d("XKeywordSubscribeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/keyword\/controller\/{?keyword_id}\/",{keyword_id:{type:"String"}});}),null);
__d('NotificationTabsController',['cx','React','LogicalGrid.react','NotificationsTabConfig','NotificationsTabsModel','SignalsTab.react','XKeywordSubscribeController'],(function a(b,c,d,e,f,g,h){var i={conversations:'https://our.intern.facebook.com/intern/wiki/IT_Frontpage'+'/Enterprise_Labs/Tabs_for_Notifications/#FAQ',keywords:c('XKeywordSubscribeController').getURIBuilder().getURI()},j={getSizeUnseenState:function k(l){var m={};for(var n in c('NotificationsTabsModel').TABS)m[c('NotificationsTabsModel').TABS[n]]=0;m.All=m.All||0;var o=[];for(var p in l){o.push(l[p].seen_state);if(l[p].seen_state in c('NotificationsTabConfig').notifs_unseen){m.All++;if(!isNaN(m[l[p].notifTab]))m[l[p].notifTab]++;}}return m;},getTabByName:function k(l,m,n,o){var p=m[l]||0;return c('React').createElement(c('SignalsTab.react'),{title:l,key:l,count:p},c('React').createElement(c('LogicalGrid.react'),{component:n},o),c('React').createElement('div',{className:"_57g3"},c('React').createElement('a',{href:i.conversations},'Learn More')));}};f.exports=j;}),null);
__d("NotificationsTabEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONVERSATIONS:"My Conversations",KEYWORDS:"Keywords"});}),null);
__d('WebNotificationsBottomCollisionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:WebNotificationsBottomCollisionsLoggerConfig',this.$WebNotificationsBottomCollisionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:WebNotificationsBottomCollisionsLoggerConfig',this.$WebNotificationsBottomCollisionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$WebNotificationsBottomCollisionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$WebNotificationsBottomCollisionsTypedLogger1=babelHelpers['extends']({},this.$WebNotificationsBottomCollisionsTypedLogger1,j);return this;};h.prototype.setVC=function(j){this.$WebNotificationsBottomCollisionsTypedLogger1.vc=j;return this;};var i={vc:true};f.exports=h;}),null);
__d('NotificationJewelList.react',['cx','fbt','Animation','ErrorBoundary.react','Event','FunnelLogger','LogicalGrid.react','NotificationBucket.react','NotificationJewelFunnelLoggingConstants','NotificationListConfig','NotificationListItem.react','NotificationListPropTypes','NotificationsTabConfig','NotificationsTabEnum','NotificationsTabsModel','NotificationTabsController','NotificationVPVs','NotifTestIDs','QE2Logger','React','ReactDOM','ScrollableArea.react','SignalsTab.react','SignalsTabGroup.react','SubscriptionsHandler','TimeSlice','Vector','WebNotificationsBottomCollisionsTypedLogger','XUISpinner.react','debounce','getObjectValues','isEmpty','throttle'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_NAME,m=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_EVENT,n=c('NotificationListConfig').numStoriesFromEndBeforeAFetchIsTriggered,o=160,p=530,q=61,r=Math.ceil(q*n),s=64,t=430,u=void 0;function v(x){if(u!=x){new (c('WebNotificationsBottomCollisionsTypedLogger'))().log();u=x;}}j=babelHelpers.inherits(w,c('React').Component);k=j&&j.prototype;function w(){var x,y;'use strict';for(var z=arguments.length,aa=Array(z),ba=0;ba<z;ba++)aa[ba]=arguments[ba];return y=(x=k.constructor).call.apply(x,[this].concat(aa)),this.state={lastMeasuredHeight:null},this.$NotificationJewelList2=[],this.$NotificationJewelList6=new (c('SubscriptionsHandler'))(),this.$NotificationJewelList9=function(){if(!this.$NotificationJewelList3||!this.$NotificationJewelList5)return;var ca=c('ReactDOM').findDOMNode(this.$NotificationJewelList3);if(!ca)return;var da=c('ReactDOM').findDOMNode(this.$NotificationJewelList5);if(!da)return;var ea=c('NotificationVPVs').getValidatedRectangle(da);if(this.props.afterScroll){var fa=function(){this.props.afterScroll(this.$NotificationJewelList7(),ca,ea);}.bind(this),ga=c('Vector').getElementDimensions(da).y,ha=this.$NotificationJewelList5&&this.$NotificationJewelList5.getArea();if(ha&&ha.getContentHeight()>=ga){c('TimeSlice').guard(fa,'NotificationJewelList afterScrollCallback',{isContinuation:false})();}else fa();}}.bind(this),this.$NotificationJewelList10=function(){return c('getObjectValues')(this.props.notifs).map(function(ca){return JSON.stringify(ca);});}.bind(this),this.$NotificationJewelList14=function(ca,da){var ea,fa=this,ga=this.$NotificationJewelList11(da);if(ca.ids&&ca.ids.length){var ea=function(){var ha=fa.props.notifs,ia=ca.ids.filter(function(ja){return !!ha[ja];});if(ia.length===0)return {v:null};}();if(typeof ea==="object")return ea.v;}return c('React').createElement('li',{key:da},c('React').createElement(c('NotificationBucket.react'),{bucket:ca,listRenderer:this.$NotificationJewelList15,startIndex:ga}));}.bind(this),this.$NotificationJewelList15=function(ca,da){da=da||0;return ca.map(function(ea,fa){var ga=this.props.notifs[ea];if(!ga)return null;var ha=fa+da;return this.$NotificationJewelList16(ga,ha,ha);}.bind(this));}.bind(this),this.$NotificationJewelList19=function(){this.setState(function(ca){return babelHelpers['extends']({},ca,{lastMeasuredHeight:this.$NotificationJewelList8()});}.bind(this));}.bind(this),this.$NotificationJewelList20=function(){var ca=c('debounce')(this.$NotificationJewelList19);this.$NotificationJewelList6.addSubscriptions(ca);return ca;}.bind(this)(),this.$NotificationJewelList22=function(){c('FunnelLogger').appendAction(l,m.SCROLL_TO_FETCH);this.$NotificationJewelList9();}.bind(this),this.$NotificationJewelList23=function(){if(c('NotificationListConfig').scrollToFetchThrottleInsteadOfDebounce){return c('throttle').acrossTransitionsWithBlocking(this.$NotificationJewelList22);}else{var ca=c('debounce')(this.$NotificationJewelList22);this.$NotificationJewelList6.addSubscriptions(ca);return ca;}}.bind(this)(),y;}w.prototype.$NotificationJewelList7=function(){'use strict';if(!this.$NotificationJewelList4||!this.$NotificationJewelList5)return false;var x=c('ReactDOM').findDOMNode(this.$NotificationJewelList5);if(!x)return false;var y=c('ReactDOM').findDOMNode(this.$NotificationJewelList4);if(!y)return false;var z=c('Vector').getElementDimensions(x).y;if(z===0)return false;var aa=c('Vector').getElementPosition(x).y+z,ba=c('Vector').getElementPosition(y).y,ca=this.$NotificationJewelList5&&this.$NotificationJewelList5.getArea();if(ca&&ca.getScrollTop()>0&&ba<aa)v(c('getObjectValues')(this.props.notifs).length);c('QE2Logger').logExposureForUser('www_notifications_perf_h2_2017');return ba-r<aa;};w.prototype.$NotificationJewelList8=function(){'use strict';var x=c('Vector').getViewportDimensions().y,y=Math.min(this.props.maxHeight||p,x-o);if(this.props.upsell)return Math.max(y-s,0);return y;};w.prototype.$NotificationJewelList11=function(x){'use strict';return this.$NotificationJewelList2.slice(0,x).reduce(function(y,z){return y+z;},0);};w.prototype.$NotificationJewelList12=function(x){'use strict';this.$NotificationJewelList2=x?x.map(function(y){return y.ids.length;}):[];};w.prototype.$NotificationJewelList13=function(){'use strict';if(!this.props.buckets)return null;return this.props.buckets.map(this.$NotificationJewelList14);};w.prototype.$NotificationJewelList16=function(x,y,z){'use strict';var aa=x.alert_id;return c('React').createElement(c('ErrorBoundary.react'),{key:aa},c('React').createElement(c('NotificationListItem.react'),{getDebugData:this.$NotificationJewelList10,isRead:this.props.readState[aa],negativeTracking:this.props.negativeTracking,onChevronHide:this.props.onChevronHide,onChevronShow:this.props.onChevronShow,onRead:this.props.onRead,parent:this,paused:this.props.paused,row:y,rowIndex:z,shortenTimestamp:this.props.shortenTimestamp,visible:!this.props.hiddenState[aa],notification:x}));};w.prototype.$NotificationJewelList17=function(x,y){'use strict';var z=void 0;if(!x){z=function ba(ca){return ca;};}else z=function ba(ca){if(ca.notifTab===y)return ca;return null;};var aa=c('getObjectValues')(this.props.notifs).filter(z).map(function(ba){return ba.alert_id;});return c('getObjectValues')(this.props.notifs).filter(z).map(function(ba,ca){var da=ba.alert_id,ea=this.$NotificationJewelList18(da,aa);return this.$NotificationJewelList16(ba,ea,ca);}.bind(this));};w.prototype.$NotificationJewelList21=function(x){'use strict';if(this.props.onNumNotificationsViewableChange)this.props.onNumNotificationsViewableChange(x/q);};w.prototype.componentWillMount=function(){'use strict';this.$NotificationJewelList12(this.props.buckets);this.$NotificationJewelList6.addSubscriptions(c('Event').listen(window,'resize',this.$NotificationJewelList20));this.$NotificationJewelList19();};w.prototype.componentDidMount=function(){'use strict';var x=this.state.lastMeasuredHeight;if(x!=null)this.$NotificationJewelList21(x);};w.prototype.componentWillReceiveProps=function(x){'use strict';if(x.buckets===this.props.buckets)return;this.$NotificationJewelList12(x.buckets);};w.prototype.componentDidUpdate=function(x,y){'use strict';if(this.props.paused&&!x.paused)if(this.props.shouldScroll&&this.$NotificationJewelList5){var z=this.$NotificationJewelList5.getArea();if(z)z.scrollToTop(false);}var aa=this.state.lastMeasuredHeight;if(aa!=null&&aa!==y.lastMeasuredHeight){this.$NotificationJewelList21(aa);if(this.$NotificationJewelList1){this.$NotificationJewelList1.stop();delete this.$NotificationJewelList1;}if(!c('isEmpty')(this.props.notifs)){var ba=c('ReactDOM').findDOMNode(this.$NotificationJewelList5);if(ba)this.$NotificationJewelList1=new (c('Animation'))(ba).to('height',aa+'px').duration(100).go();}}setTimeout(this.$NotificationJewelList9,0);};w.prototype.componentWillUnmount=function(){'use strict';this.$NotificationJewelList6.release();if(this.$NotificationJewelList1){this.$NotificationJewelList1.stop();delete this.$NotificationJewelList1;}};w.prototype.$NotificationJewelList18=function(x,y){'use strict';return y.indexOf(x);};w.prototype.$NotificationJewelList24=function(){'use strict';if(this.props.buckets&&this.props.buckets.length)return this.$NotificationJewelList13();return this.$NotificationJewelList17(false,'');};w.prototype.render=function(){'use strict';var x=this.props.notifs,y=null,z=null,aa=t,ba=null,ca=c('React').createElement('ul',{'data-gt':this.props.tracking,'data-testid':c('NotifTestIDs').REACT_NOTIF_LIST});if(!c('isEmpty')(x)){y=c('React').createElement(c('LogicalGrid.react'),{ref:function(oa){return this.$NotificationJewelList3=oa;}.bind(this),component:ca},this.$NotificationJewelList24());z=this.state.lastMeasuredHeight;}else if(!this.props.canFetchMore)y=c('React').createElement('div',{className:"_572e",'data-testid':c('NotifTestIDs').REACT_NOTIF_LIST},i._("No new notifications"));if(this.props.canFetchMore)ba=c('React').createElement(c('XUISpinner.react'),{ref:function(oa){return this.$NotificationJewelList4=oa;}.bind(this),paused:!this.props.currentlyFetching,className:"jewelLoading"});var da=null;if(this.props.upsell){var ea=this.props.upsell.module;da=c('React').createElement(ea,this.props.upsell.props);}var fa="_50-t"+(this.props.showingChevron?' '+"_2iy1":''),ga=c('React').createElement(c('ScrollableArea.react'),{ref:function(oa){return this.$NotificationJewelList5=oa;}.bind(this),width:aa,height:z,fade:true,persistent:true,onScroll:this.$NotificationJewelList23},y,ba);if(c('NotificationsTabConfig').in_gk_notifications_tab&&c('NotificationsTabConfig').is_work_user){var ha=true,ia=this.$NotificationJewelList17(ha,c('NotificationsTabEnum').CONVERSATIONS),ja=this.$NotificationJewelList17(ha,c('NotificationsTabEnum').KEYWORDS),ka=c('NotificationTabsController').getSizeUnseenState(x),la=c('NotificationTabsController').getTabByName(c('NotificationsTabsModel').TABS.myConversations,ka,ca,ia),ma=c('NotificationTabsController').getTabByName(c('NotificationsTabsModel').TABS.keywords,ka,ca,ja),na=c('NotificationsTabsModel').TABS.all;ga=c('React').createElement(c('SignalsTabGroup.react'),{onSelectionChanged:c('NotificationsTabsModel').onTabSelectionChanged},c('React').createElement(c('SignalsTab.react'),{title:na,key:na,count:ka[na]},ga),la,ma);}return c('React').createElement('div',{className:fa},ga,da);};w.propTypes=c('NotificationListPropTypes');f.exports=w;}),null);