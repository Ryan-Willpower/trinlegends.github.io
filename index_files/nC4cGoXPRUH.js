if (self.CavalryLogger) { CavalryLogger.start_js(["k3yN7"]); }

__d('legacy:dom-html',['HTML'],(function a(b,c,d,e,f,g){b.HTML=c('HTML');}),3);
__d('ReactComposerPhotoTaggerButtonWithOptions.react',['cx','fbt','Bootloader','CarouselPagesComposerSource','ComposerTargetData','FileInput.react','Grid.react','LayerHideOnBlur','Link.react','React','ReactComponentWithPureRenderMixin','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerContextMixin','ReactComposerLoggingName','ReactComposerMediaFilePickerController.react','ReactComposerMediaUtils','ReactComposerPhotoCarouselActions','ReactComposerPhotoTaggerButton.react','ReactComposerSlideshowActions','ReactObjectiveFirstPagesComposerGlobalFlags','SlideshowEntrypoint','TooltipLink.react','XUIContextualDialog.react','XUIContextualDialogBody.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPhotoTaggerButtonWithOptions',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin')],propTypes:{mediaAcceptParam:k.shape({photos:k.string,both:k.string}).isRequired,disableFaceRecognition:k.bool.isRequired,onClick:k.func,photoLimit:k.number.isRequired,targetData:k.instanceOf(c('ComposerTargetData')).isRequired,hasData:k.bool,selected:k.bool,uploadSize:k.number},getDefaultProps:function m(){return {hasData:false,mediaAcceptParam:{},selected:false};},getInitialState:function m(){return {dialogShown:false};},onLinkClick:function m(){if(c('ReactObjectiveFirstPagesComposerGlobalFlags').getIsObjectiveFirstPagesComposer())c('Bootloader').loadModules(["PagesPublishingLoggingActions"],function(n){n.clickedTagger(c('ReactComposerLoggingName').MEDIA_TAGGER);},'ReactComposerPhotoTaggerButtonWithOptions.react');this.setState({dialogShown:!this.state.dialogShown});},onToggle:function m(n){if(n!==this.state.dialogShown)this.setState({dialogShown:n});},render:function m(){if(this.props.uploadSize)return c('React').createElement(c('ReactComposerMediaFilePickerController.react'),babelHelpers['extends']({},this.props,{loggingName:c('ReactComposerLoggingName').MEDIA_TAGGER}),c('React').createElement(c('ReactComposerPhotoTaggerButton.react'),this.props));var n=c('joinClasses')("_2vwi"+(' '+"_lnh")+(this.props.hasData?' '+"_6xe":'')+(this.state.dialogShown?' '+"_50hx":''),this.props.className),o=this.props.photoLimit>1?i._("Add photos to your post"):i._("Add a photo to your post"),p=i._("Create a Photo Carousel"),q=i._("Upload Photos\/Video"),r=i._("Create a Slideshow"),s=c('React').createElement(c('XUIContextualDialog.react'),{autoFocus:false,behaviors:{LayerHideOnBlur:c('LayerHideOnBlur')},contextRef:function(){return this.refs.cameraIcon;}.bind(this),offsetY:10,onToggle:this.onToggle,position:'above',shown:this.state.dialogShown,width:c('XUIContextualDialog.react').WIDTH.SMALL},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement(c('Grid.react'),{cols:1,spacing:"_2phz"},c('React').createElement(j,null,c('React').createElement(c('Link.react'),{className:"_3fpv",onClick:this._onSlideshowCreationClicked},r)),c('React').createElement(j,null,c('React').createElement(c('Link.react'),{className:"_3fpv",onClick:this._onCarouselCreationClicked},p)),c('React').createElement(j,null,c('React').createElement(c('ReactComposerMediaFilePickerController.react'),babelHelpers['extends']({},this.props,{loggingName:c('ReactComposerLoggingName').MEDIA_TAGGER}),c('React').createElement(c('Link.react'),{className:"_3fpv",onClick:this._onSelect},q))))));return c('React').createElement('div',{className:"_3xem _3xen",ref:'cameraIcon'},c('React').createElement(c('TooltipLink.react'),{className:n,onClick:this.onLinkClick,tooltip:o},c('React').createElement('span',{className:"accessible_elem"},this.props.photoLimit>1?i._("Add photos"):i._("Add photo"))),s);},_onFilesSelected:function m(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput());c('ReactComposerMediaUtils').clearInput(this.refs.fileInput.getFileInput());},_onCarouselCreationClicked:function m(event){c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,c('ReactComposerAttachmentType').MEDIA,true);c('ReactComposerPhotoCarouselActions').showPhotoCarouselUrlEditArea(this.context.composerID,c('CarouselPagesComposerSource').CAROUSEL_CAMERA_ICON,this.context.targetID);},_onSlideshowCreationClicked:function m(event){c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,c('ReactComposerAttachmentType').MEDIA,true);c('ReactComposerSlideshowActions').showSlideshowDialog(this.context.composerID,c('SlideshowEntrypoint').COMPOSER_CAMERA_ICON);}});f.exports=l;}),null);